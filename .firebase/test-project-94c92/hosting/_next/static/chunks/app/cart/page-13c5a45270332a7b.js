(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[565],{2778:function(e,t,r){Promise.resolve().then(r.bind(r,6006))},6006:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var s=r(7437);r(2265);var c=r(5139),a=e=>{let{product:t}=e,{state:r,dispatch:a}=(0,c.useCart)(),{cart:i}=r,l=()=>{a({type:"CALCULATE_PRICE",payload:{priceId:t.product.id}})};return console.log(t.product.title),(0,s.jsxs)("div",{className:"flex items-center gap-3 border-t-2 py-3",children:[(0,s.jsx)("img",{className:"h-16 w-16",src:t.product.image}),(0,s.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,s.jsx)("h1",{children:t.product.title}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("div",{className:"flex gap-2 border-solid-gray-950 border-2 px-1",children:[(0,s.jsx)("div",{className:"cursor-pointer",onClick:()=>{a({type:"DECREMENT_QTY",payload:{itemId:t.product.id}}),l()},children:"-"}),(0,s.jsx)("div",{children:t.qty}),(0,s.jsx)("div",{className:"cursor-pointer",onClick:()=>{a({type:"INCREMENT_QTY",payload:{id:t.product.id}}),l()},children:"+"})]}),(0,s.jsxs)("p",{className:"font-thin",children:["$ ",t.product.price]}),(0,s.jsxs)("p",{children:["$ ",t.totalPrice]})]})]})]})},i=r(6923);r(9497);var l=r(7106),n=r(9222);r(9759);let o=(0,l.J)("pk_test_51N3XyOBoZZlr23EQzDm4iuW4wXlmC2u8HNvUzihPC5MbFnCbozaDNR2JDdPHUa9K8nAzeHm1FvxhjtMvKmdO2bVe0083As07bY");var d=()=>{let{state:e,grandTotal:t}=(0,c.useCart)(),{user:r,googleSignIn:l,logOut:d}=(0,i.UserAuth)(),u=async()=>{let t=await o,r=await n.Z.post("/api/create-stripe-session",{items:e.cart}),s=await t.redirectToCheckout({sessionId:r.data.id});s.error&&alert(s.error.message)};return(0,s.jsxs)("div",{className:"my-24 m-6",children:[(0,s.jsx)("h1",{children:"This is your shopping cart"}),(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)("ul",{className:"flex flex-col gap-6 my-6",children:e.cart.map(e=>(0,s.jsx)(a,{id:e.id,product:e}))}),(0,s.jsxs)("h1",{className:"mb-6",children:["Total: $",t]}),(0,s.jsx)("button",{className:"cursor-pointer bg-black text-white py-2 px-6",role:"link",onClick:()=>{u()},children:"Check out"})]})]})}},9497:function(e,t,r){"use strict";r.r(t);var s=r(7437),c=r(2265),a=r(1396),i=r.n(a),l=r(6923),n=r(5139),o=r(5391);r(6006),t.default=()=>{let{user:e,googleSignIn:t,logOut:r}=(0,l.UserAuth)(),[a,d]=(0,c.useState)(!0),{clickHandler:u}=(0,c.useContext)(n.CartContext),{state:p}=(0,c.useContext)(n.CartContext),x=async()=>{try{await t()}catch(e){console.log(e)}},h=async()=>{try{await r()}catch(e){console.log(e)}};return(0,c.useEffect)(()=>{let e=async()=>{await new Promise(e=>setTimeout(e,50)),d(!1)};e()},[e]),(0,s.jsxs)("div",{className:"p-2 w-full flex items-center justify-between fixed top-0 bg-gray-500 text-white z-20",children:[(0,s.jsx)("ul",{className:"flex",children:(0,s.jsx)("li",{className:"p-2 cursor-pointer",children:(0,s.jsx)(i(),{href:"/",children:"Bargain Depot"})})}),a?null:e?(0,s.jsxs)("div",{className:"flex gap-5 items-center",children:[(0,s.jsx)("button",{onClick:u,children:(0,s.jsx)(i(),{href:"/cart",children:(0,s.jsxs)("div",{className:"text-xl cursor-pointer relative",children:[(0,s.jsx)(o.YLQ,{}),(0,s.jsx)("div",{className:"absolute p-2 -right-1 -bottom-2 bg-red-600 h-3.5 w-3.5 rounded-full flex items-center justify-center",children:(0,s.jsx)("p",{className:"text-sm",children:p.cart.length})})]})})}),(0,s.jsx)("div",{children:(0,s.jsxs)("p",{children:["welcome, ",e.displayName.split("")[0]]})}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{className:"cursor-pointer bg-rose-400 p-1.5 rounded",onClick:h,children:"Log Out"})})]}):(0,s.jsxs)("div",{className:"flex gap-10 items-center",children:[(0,s.jsx)("button",{onClick:u,children:(0,s.jsx)(i(),{href:"/cart",children:(0,s.jsxs)("div",{className:"text-xl cursor-pointer relative",children:[(0,s.jsx)(o.YLQ,{}),(0,s.jsx)("div",{className:"absolute p-2 -right-1 -bottom-2 bg-red-600 h-3.5 w-3.5 rounded-full flex items-center justify-center",children:(0,s.jsx)("p",{className:"text-sm",children:p.cart.length})})]})})}),(0,s.jsx)("button",{className:"cursor-pointer bg-rose-400 p-1.5 rounded",onClick:x,children:"Login"})]})]})}},6923:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthContextProvider:function(){return o},UserAuth:function(){return n}});var s=r(7437),c=r(2265),a=r(3085),i=r(9759);let l=(0,c.createContext)(),n=()=>(0,c.useContext)(l),o=e=>{let{children:t}=e,[r,n]=(0,c.useState)(null);return(0,c.useEffect)(()=>{let e=(0,a.Aj)(i.I8,e=>{n(e)});return()=>e()},[r]),(0,s.jsx)(l.Provider,{value:{user:r,googleSignIn:()=>{let e=new a.hJ;(0,a.rh)(i.I8,e)},logOut:()=>{(0,a.w7)(i.I8)}},children:t})}},5139:function(e,t,r){"use strict";r.r(t),r.d(t,{CartContext:function(){return a},CartProvider:function(){return n},CartState:function(){return d},useCart:function(){return o}});var s=r(7437),c=r(2265);let a=(0,c.createContext)(),i=(e,t)=>{switch(t.type){case"ADD_TO_CART":return{...e,cart:[...e.cart,{...t.payload,qty:1,totalPrice:t.payload.product.price}]};case"REMOVE_FROM_CART":return{...e,cart:e.cart.filter(e=>e.product.id!==t.payload.id)};case"INCREMENT_QTY":let{id:r}=t.payload,s=e.cart.map(e=>e.product.id===r?{...e,qty:e.qty+1}:e);return{...e,cart:s};case"DECREMENT_QTY":let{itemId:c}=t.payload,a=e.cart.map(e=>{if(e.product.id===c){let t=e.qty-1;return t<=0?null:{...e,qty:t}}return e});return{...e,cart:a.filter(Boolean)};case"CALCULATE_PRICE":let{priceId:i}=t.payload,l=e.cart.map(e=>e.product.id===i?{...e,totalPrice:e.product.price*e.qty}:e);return{...e,cart:l};default:return e}},l=e=>{let t=0;for(let r=0;r<e.length;r++)t+=e[r].totalPrice;return t.toFixed(2)},n=e=>{let{children:t}=e,[r,n]=(0,c.useReducer)(i,{cart:[]});console.log(r.cart);let o=l(r.cart),d=!1,u=r.cart.reduce((e,t)=>e+t.quantity,0);return(0,s.jsx)(a.Provider,{value:{state:r,dispatch:n,cartActive:d,clickHandler:()=>{d=!d,console.log("clicked!"),console.log(d)},totalQuantity:u,calculateItemQuantities:function(e){let t={};for(let r of e)r.id in t?t[r.id]+=1:t[r.id]=1;return t},grandTotal:o},children:t})},o=()=>{let e=(0,c.useContext)(a);if(!e)throw Error("useCart must be used within a CartProvider");return e},d=()=>(0,c.useContext)(cart)},9759:function(e,t,r){"use strict";r.d(t,{I8:function(){return l}}),r(994);var s=r(3085),c=r(4086),a=r(3991);let i=(0,a.ZF)({apiKey:"AIzaSyAlEYqf5S5RQAxPQ_MibgLDGkShyUrI1KI",authDomain:"test-project-94c92.firebaseapp.com",projectId:"test-project-94c92",storageBucket:"test-project-94c92.appspot.com",messagingSenderId:"181256789630",appId:"1:181256789630:web:5661552a04f5615677c22f",measurementId:"G-KG7ZTDLBDD"});(0,c.ad)(i);let l=(0,s.v0)(i)}},function(e){e.O(0,[214,929,358,402,982,971,596,744],function(){return e(e.s=2778)}),_N_E=e.O()}]);