(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{3318:function(e,t,r){Promise.resolve().then(r.bind(r,8548)),Promise.resolve().then(r.bind(r,6923)),Promise.resolve().then(r.bind(r,2833)),Promise.resolve().then(r.bind(r,5139)),Promise.resolve().then(r.bind(r,9497)),Promise.resolve().then(r.t.bind(r,3177,23)),Promise.resolve().then(r.t.bind(r,2014,23))},6006:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var s=r(7437);r(2265);var i=r(5139),c=e=>{let{product:t}=e,{state:r,dispatch:c}=(0,i.useCart)(),{cart:n}=r,a=()=>{c({type:"CALCULATE_PRICE",payload:{priceId:t.product.id}})};return console.log(t.product.title),(0,s.jsxs)("div",{className:"flex items-center gap-3 border-t-2 py-3",children:[(0,s.jsx)("img",{className:"h-16 w-16",src:t.product.image}),(0,s.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,s.jsx)("h1",{children:t.product.title}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("div",{className:"flex gap-2 border-solid-gray-950 border-2 px-1",children:[(0,s.jsx)("div",{className:"cursor-pointer",onClick:()=>{c({type:"DECREMENT_QTY",payload:{itemId:t.product.id}}),a()},children:"-"}),(0,s.jsx)("div",{children:t.qty}),(0,s.jsx)("div",{className:"cursor-pointer",onClick:()=>{c({type:"INCREMENT_QTY",payload:{id:t.product.id}}),a()},children:"+"})]}),(0,s.jsxs)("p",{className:"font-thin",children:["$ ",t.product.price]}),(0,s.jsxs)("p",{children:["$ ",t.totalPrice]})]})]})]})},n=r(6923);r(9497);var a=r(7106),l=r(9222);r(9759);let o=(0,a.J)("pk_test_51N3XyOBoZZlr23EQzDm4iuW4wXlmC2u8HNvUzihPC5MbFnCbozaDNR2JDdPHUa9K8nAzeHm1FvxhjtMvKmdO2bVe0083As07bY");var d=()=>{let{state:e,grandTotal:t}=(0,i.useCart)(),{user:r,googleSignIn:a,logOut:d}=(0,n.UserAuth)(),u=async()=>{let t=await o,r=await l.Z.post("/api/create-stripe-session",{items:e.cart}),s=await t.redirectToCheckout({sessionId:r.data.id});s.error&&alert(s.error.message)};return(0,s.jsxs)("div",{className:"my-24 m-6",children:[(0,s.jsx)("h1",{children:"This is your shopping cart"}),(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)("ul",{className:"flex flex-col gap-6 my-6",children:e.cart.map(e=>(0,s.jsx)(c,{id:e.id,product:e}))}),(0,s.jsxs)("h1",{className:"mb-6",children:["Total: $",t]}),(0,s.jsx)("button",{className:"cursor-pointer bg-black text-white py-2 px-6",role:"link",onClick:()=>{u()},children:"Check out"})]})]})}},9497:function(e,t,r){"use strict";r.r(t);var s=r(7437),i=r(2265),c=r(1396),n=r.n(c),a=r(6923),l=r(5139),o=r(5391);r(6006),t.default=()=>{let{user:e,googleSignIn:t,logOut:r}=(0,a.UserAuth)(),[c,d]=(0,i.useState)(!0),{clickHandler:u}=(0,i.useContext)(l.CartContext),{state:x}=(0,i.useContext)(l.CartContext),h=async()=>{try{await t()}catch(e){console.log(e)}},p=async()=>{try{await r()}catch(e){console.log(e)}};return(0,i.useEffect)(()=>{let e=async()=>{await new Promise(e=>setTimeout(e,50)),d(!1)};e()},[e]),(0,s.jsxs)("div",{className:"p-2 w-full flex items-center justify-between fixed top-0 bg-gray-500 text-white z-20",children:[(0,s.jsx)("ul",{className:"flex",children:(0,s.jsx)("li",{className:"p-2 cursor-pointer",children:(0,s.jsx)(n(),{href:"/",children:"Bargain Depot"})})}),c?null:e?(0,s.jsxs)("div",{className:"flex gap-5 items-center",children:[(0,s.jsx)("button",{onClick:u,children:(0,s.jsx)(n(),{href:"/cart",children:(0,s.jsxs)("div",{className:"text-xl cursor-pointer relative",children:[(0,s.jsx)(o.YLQ,{}),(0,s.jsx)("div",{className:"absolute p-2 -right-1 -bottom-2 bg-red-600 h-3.5 w-3.5 rounded-full flex items-center justify-center",children:(0,s.jsx)("p",{className:"text-sm",children:x.cart.length})})]})})}),(0,s.jsx)("div",{children:(0,s.jsxs)("p",{children:["welcome, ",e.displayName.split("")[0]]})}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{className:"cursor-pointer bg-rose-400 p-1.5 rounded",onClick:p,children:"Log Out"})})]}):(0,s.jsxs)("div",{className:"flex gap-10 items-center",children:[(0,s.jsx)("button",{onClick:u,children:(0,s.jsx)(n(),{href:"/cart",children:(0,s.jsxs)("div",{className:"text-xl cursor-pointer relative",children:[(0,s.jsx)(o.YLQ,{}),(0,s.jsx)("div",{className:"absolute p-2 -right-1 -bottom-2 bg-red-600 h-3.5 w-3.5 rounded-full flex items-center justify-center",children:(0,s.jsx)("p",{className:"text-sm",children:x.cart.length})})]})})}),(0,s.jsx)("button",{className:"cursor-pointer bg-rose-400 p-1.5 rounded",onClick:h,children:"Login"})]})]})}},6923:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthContextProvider:function(){return o},UserAuth:function(){return l}});var s=r(7437),i=r(2265),c=r(3085),n=r(9759);let a=(0,i.createContext)(),l=()=>(0,i.useContext)(a),o=e=>{let{children:t}=e,[r,l]=(0,i.useState)(null);return(0,i.useEffect)(()=>{let e=(0,c.Aj)(n.I8,e=>{l(e)});return()=>e()},[r]),(0,s.jsx)(a.Provider,{value:{user:r,googleSignIn:()=>{let e=new c.hJ;(0,c.rh)(n.I8,e)},logOut:()=>{(0,c.w7)(n.I8)}},children:t})}},5139:function(e,t,r){"use strict";r.r(t),r.d(t,{CartContext:function(){return c},CartProvider:function(){return l},CartState:function(){return d},useCart:function(){return o}});var s=r(7437),i=r(2265);let c=(0,i.createContext)(),n=(e,t)=>{switch(t.type){case"ADD_TO_CART":return{...e,cart:[...e.cart,{...t.payload,qty:1,totalPrice:t.payload.product.price}]};case"REMOVE_FROM_CART":return{...e,cart:e.cart.filter(e=>e.product.id!==t.payload.id)};case"INCREMENT_QTY":let{id:r}=t.payload,s=e.cart.map(e=>e.product.id===r?{...e,qty:e.qty+1}:e);return{...e,cart:s};case"DECREMENT_QTY":let{itemId:i}=t.payload,c=e.cart.map(e=>{if(e.product.id===i){let t=e.qty-1;return t<=0?null:{...e,qty:t}}return e});return{...e,cart:c.filter(Boolean)};case"CALCULATE_PRICE":let{priceId:n}=t.payload,a=e.cart.map(e=>e.product.id===n?{...e,totalPrice:e.product.price*e.qty}:e);return{...e,cart:a};default:return e}},a=e=>{let t=0;for(let r=0;r<e.length;r++)t+=e[r].totalPrice;return t.toFixed(2)},l=e=>{let{children:t}=e,[r,l]=(0,i.useReducer)(n,{cart:[]});console.log(r.cart);let o=a(r.cart),d=!1,u=r.cart.reduce((e,t)=>e+t.quantity,0);return(0,s.jsx)(c.Provider,{value:{state:r,dispatch:l,cartActive:d,clickHandler:()=>{d=!d,console.log("clicked!"),console.log(d)},totalQuantity:u,calculateItemQuantities:function(e){let t={};for(let r of e)r.id in t?t[r.id]+=1:t[r.id]=1;return t},grandTotal:o},children:t})},o=()=>{let e=(0,i.useContext)(c);if(!e)throw Error("useCart must be used within a CartProvider");return e},d=()=>(0,i.useContext)(cart)},2833:function(e,t,r){"use strict";r.r(t),r.d(t,{ProductProvider:function(){return l},useProductContext:function(){return a}});var s=r(7437),i=r(2265),c=r(9222);let n=(0,i.createContext)(),a=()=>(0,i.useContext)(n),l=e=>{let{children:t}=e,[r,a]=(0,i.useState)([]);return(0,i.useEffect)(()=>{let e=async()=>{let{data:e}=await c.Z.get("https://fakestoreapi.com/products");console.log(e),a(e)};e()},[]),(0,s.jsx)(n.Provider,{value:{products:r},children:t})}},9759:function(e,t,r){"use strict";r.d(t,{I8:function(){return a}}),r(994);var s=r(3085),i=r(4086),c=r(3991);let n=(0,c.ZF)({apiKey:"AIzaSyAlEYqf5S5RQAxPQ_MibgLDGkShyUrI1KI",authDomain:"test-project-94c92.firebaseapp.com",projectId:"test-project-94c92",storageBucket:"test-project-94c92.appspot.com",messagingSenderId:"181256789630",appId:"1:181256789630:web:5661552a04f5615677c22f",measurementId:"G-KG7ZTDLBDD"});(0,i.ad)(n);let a=(0,s.v0)(n)},8548:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var s=r(7437);r(2265);var i=r(2833),c=r(5139),n=r(6691),a=r.n(n),l=r(4606);r(7106),r(3085);var o=e=>{let{product:t}=e,{state:r,dispatch:n}=(0,c.useCart)(),{cart:o}=r,{products:d}=(0,i.useProductContext)(),u=o.find(e=>e.product.id===t.id),x=()=>{n({type:"REMOVE_FROM_CART",payload:t})},h=e=>{n({type:"ADD_TO_CART",payload:e})};return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"border border-[#e4e4e4] h-[300px] mb-4 relative overflow-hidden group transition",children:[(0,s.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:(0,s.jsx)("div",{className:"w-[200px] mx-auto flex justify-center items-center group-hover:scale-110 transition duration-300",children:(0,s.jsx)(a(),{width:"100",height:"100",src:t.image,alt:"product photo"})})}),(0,s.jsxs)("div",{className:"absolute top-3 -right-40 group-hover:right-5 flex flex-col justify-center gap-2 items-center opacity-0 group-hover:opacity-100 transition-all duration-30",children:[(0,s.jsx)("button",{className:u?"bg-blue-400 text-white text-xl h-11 w-11":"bg-rose-400 text-white text-xl h-11 w-11 ",onClick:()=>{u?x({product:t}):h({product:t})},children:u?"-":"+"}),(0,s.jsx)("a",{className:"shadow-md p-2 w-11 h-11 cursor-pointer flex justify-center items-center",children:(0,s.jsx)(l.rnh,{})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm capitalize text-gray-500 mb-1",children:t.category}),(0,s.jsx)("p",{children:t.title}),(0,s.jsxs)("p",{children:["$",t.price]})]})]})};function d(){let{products:e}=(0,i.useProductContext)();return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("main",{className:"container mx-auto my-20",children:[(0,s.jsx)("h1",{className:"text-center mb-10 text-xl",children:"Our Products"}),(0,s.jsx)("div",{className:" grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 lg:mx-8 gap-[30px] max-w-sm mx-auto md:max-w-none md:mx-0",children:e&&e.map(e=>(0,s.jsx)(o,{id:e.id,product:e}))})]})})}},3177:function(){},2014:function(e){e.exports={style:{fontFamily:"'__Inter_e66fe9', '__Inter_Fallback_e66fe9'",fontStyle:"normal"},className:"__className_e66fe9"}}},function(e){e.O(0,[214,447,929,358,402,982,691,971,596,744],function(){return e(e.s=3318)}),_N_E=e.O()}]);